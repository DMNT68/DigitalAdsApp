<ns-action-bar title="{{nombre}}" class="action-bar"></ns-action-bar>

<ScrollView>


    <GridLayout rows="*,*" columns="*" class="page p-y-5">

        <StackLayout row="0" col="0" class="card">

            <StackLayout class="card-layout">
                <Image class="img-rounded" [src]="img | imagen:'producto'"></Image>
            </StackLayout>

            <StackLayout class="card-layout-description-p">
                <Label class="h4" [text]="categoria"></Label>
                <StackLayout class="hr-light m-b-12"></StackLayout>
                <Label class="body" textWrap="true" [text]="descripcion"></Label>
            </StackLayout>
        </StackLayout>


        <GridLayout row="1" col="0" rows="*" columns="*,*">
            <GridLayout row="0" col="0" rows="*,*, auto" class="card-cotizar">

                <Label row="0" col="0" class="h5" text="Cotiza el producto"></Label>
                <StackLayout row="1" class="hr-light m-b-12"></StackLayout>

                <StackLayout row="2" *ngIf="!rotulos && !rotulos3D">

                    <Label class="h4" text="Cantidad:" textWrap="true"></Label>

                    <GridLayout class="m-y-12" columns="50,40,50">
                        <Button col="0" [text]="iconMenos" class="btn icon-cantidad ico btn-active" (tap)="variarPrecio(-1)"></Button>
                        <Label col="1" class="input-cantidad" [text]="cantidad"></Label>
                        <Button col="2" [text]="iconMas" class="btn icon-cantidad ico btn-active" (tap)="variarPrecio(+1)"></Button>
                    </GridLayout>

                </StackLayout>

                <StackLayout row="2" *ngIf="rotulos">
                    <Label text="Altura" [ngClass]="{invalid:!alturaCtrl.valid && alturaCtrl.touched}"></Label>
                    <TextField hint="Altura(metro)" class="inputVariables input" keyboardType="number" returnKeyType="next" required ngModel #alturaCtrl="ngModel"></TextField>
                    <Label text="Igresar la altura" class=" h6 text-danger" *ngIf="!alturaCtrl.valid && alturaCtrl.touched"></Label>

                    <Label text="Ancho" [ngClass]="{invalid:!anchoCtrl.valid && anchoCtrl.touched}"></Label>
                    <TextField hint="Ancho(metro)" class="inputVariables" keyboardType="number" returnKeyType="done" required ngModel #anchoCtrl="ngModel"></TextField>
                    <Label text="Igresar el ancho" class="h6 text-danger" *ngIf="!anchoCtrl.valid && anchoCtrl.touched"></Label>

                    <Button text="Calcular" (tap)="variarPrecioRotulo(alturaCtrl.value, anchoCtrl.value)" [isEnabled]="alturaCtrl.valid && anchoCtrl.valid" class="btn btn-outline btn-rounded-lg btn-active"></Button>
                </StackLayout>

                <StackLayout row="2" *ngIf="rotulos3D">
                    <Label text="Altura" [ngClass]="{invalid:!alturaCtrl.valid && alturaCtrl.touched}"></Label>
                    <TextField hint="Altura(metro)" class="inputVariables input" keyboardType="number" returnKeyType="next" required ngModel #alturaCtrl="ngModel"></TextField>
                    <Label text="Igresar la altura" class=" h6 text-danger" *ngIf="!alturaCtrl.valid && alturaCtrl.touched"></Label>

                    <Label text="Ancho" [ngClass]="{invalid:!anchoCtrl.valid && anchoCtrl.touched}"></Label>
                    <TextField hint="Ancho(metro)" class="inputVariables" keyboardType="number" returnKeyType="next" required ngModel #anchoCtrl="ngModel"></TextField>
                    <Label text="Igresar el ancho" class="h6 text-danger" *ngIf="!anchoCtrl.valid && anchoCtrl.touched"></Label>

                    <Label text="NÃºmero de letras" [ngClass]="{invalid:!nLetrasCtrl.valid && nLetrasCtrl.touched}"></Label>
                    <TextField hint="Letras" class="inputVariables" keyboardType="number" returnKeyType="done" required ngModel #nLetrasCtrl="ngModel"></TextField>
                    <Label text="Igresar el ancho" class="h6 text-danger" *ngIf="!nLetrasCtrl.valid && nLetrasCtrl.touched"></Label>

                    <Button text="Calcular" (tap)="variarPrecioRotulo3D(alturaCtrl.value, anchoCtrl.value, nLetrasCtrl.value)" [isEnabled]="alturaCtrl.valid && anchoCtrl.valid && nLetrasCtrl.valid" class="btn btn-outline btn-rounded-lg btn-active"></Button>
                </StackLayout>

            </GridLayout>

            <GridLayout row="1" col="1" rows="*,*,*,*" columns="*" class="card-cotizar">
                <Label row="0" text="Costo"></Label>
                <StackLayout row="1" class="hr-light"></StackLayout>
                <Label col="0" row="2" class="h3 text-danger text-center m-y-10" textWrap="true" text="${{precioFinal | number:'.2-2'}}"></Label>
                <Button col="0" row="3" [isEnabled]="activar || !rotulos && !rotulos3D" [text]="iconCarrito" class="m-15 btn ico icon-carrito btn-active" width="50" (tap)="agregarPedido()"></Button>
            </GridLayout>
        </GridLayout>

    </GridLayout>
</ScrollView>