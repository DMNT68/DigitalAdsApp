<ns-action-bar title="Productos" class="action-bar" [showBackButton]="false">

    <ActionItem *ngIf="!aparecer" ios.position="rigth" (tap)="goCarrito()">
        <StackLayout orientation="horizontal">
            <Label class="p-1 icono-cart" [text]="iconCarrito"></Label>
            <StackLayout class="badge" *ngIf="cs.items.length > 0">
                <Label [text]="cs.items.length" class="badge-text"></Label>
            </StackLayout>
        </StackLayout>
    </ActionItem>

    <ActionItem *ngIf="!aparecer" ios.position="rigth" (tap)="aparecerBuscar(+1)">
        <Label class="p-15 iconos" [text]="iconSearch"></Label>
    </ActionItem>

    <ActionItem *ngIf="aparecer" (tap)="aparecerBuscar(+1)" ios.position="left" android.position="actionBar">
        <Label class="p-15 iconos" text="Cerrar"></Label>
    </ActionItem>

    <SearchBar class="searchbar" color="white" textFieldHintColor="white" *ngIf="aparecer" hint="Buscar producto..." (textChange)="buscarProducto($event)"></SearchBar>

</ns-action-bar>

<StackLayout class="vacio" *ngIf="productos.length == 0">
    <Label [text]="iconProductos" class="icon-5x" textWrap="true"></Label>
    <Label text="Sin Productos" class="p-t-10" textWrap="true"></Label>
</StackLayout>

<GridLayout rows="auto,*,auto" *ngIf="productos.length != 0">

    <RadListView #myRadListView row="1" class="page p-t-5" [items]="productos | filtro:textoBuscar" pullToRefresh="true" (pullToRefreshInitiated)="onPullToRefreshInitiated($event)">

        <ng-template tkListItemTemplate let-producto="item">
            <StackLayout [nsRouterLink]="['/producto', producto._id]" pageTransition="slide">
                <!-- <StackLayout (tap)="onProductoTap(producto._id)"> -->

                <GridLayout class="card">
                    <StackLayout class="card-layout">
                        <Image class="img img-rounded" [src]="producto.img | imagen:'producto'"></Image>
                    </StackLayout>

                    <StackLayout class="card-layout-description">
                        <Label class="labe-title font-weight-bold p-y-5" [text]="producto.nombre" textWrap="true"></Label>
                        <Label class="labe-description" [text]="producto.categoria.descripcion" textWrap="true"></Label>
                    </StackLayout>
                </GridLayout>

            </StackLayout>
        </ng-template>

        <ng-template tkListViewFooter>
            <Label class="ico footer btn btn-active" [text]="iconUp" (tap)="onTapUp()"></Label>
        </ng-template>

    </RadListView>
</GridLayout>