<GridLayout rows="auto, auto,*" class="page">

    <GridLayout class="busqueda-bar" row="0">
        <GridLayout columns="40,*,40">
            <Image *ngIf="!aparecer" col="0" src="~/assets/images/logo.png"></Image>
            <Label *ngIf="aparecer" col="0" [text]="icoClose" class="ico" (tap)="aparecerBuscar(+1)"></Label>
            <Label *ngIf="!aparecer" col="2" [text]="icoSearch" class="ico" (tap)="aparecerBuscar(+1)"></Label>
            <Label *ngIf="!aparecer" col="1" text="Productos" class="titulo-bar"></Label>
            <SearchBar class="searchbar" *ngIf="aparecer" col="1" id="searchBar" hint="Buscar producto..." (textChange)="buscarProducto($event)" textFieldHintColor="gray"></SearchBar>
        </GridLayout>
    </GridLayout>

    <GridLayout *ngIf="_productosService.activarCarrito" row="1" class="card card-layout">
        <carrito></carrito>
    </GridLayout>

    <RadListView row="2" class="card" [items]="productos | filtro:textoBuscar" pullToRefresh="true" (pullToRefreshInitiated)="onPullToRefreshInitiated($event)">

        <ng-template let-producto="item">
            <StackLayout [nsRouterLink]="['/producto', producto._id]">
                <StackLayout class="card-layout">
                    <Label class="h3" [text]="producto.nombre" textWrap="true"></Label>
                    <Image class="img-rounded" stretch="aspectFill" [src]="producto.img | imagen:'producto'"></Image>
                    <Label class="h4" [text]="producto.categoria.descripcion" textWrap="true"></Label>
                    <Label class="body" textWrap="true" [text]="producto.descripcion" textWrap="true"></Label>
                    <!-- <Label class="h2 text-right text-danger" textWrap="true" text="${{producto.precioUni}}"></Label> -->
                </StackLayout>
                <StackLayout class="separador"></StackLayout>
            </StackLayout>
        </ng-template>

    </RadListView>

    <ActivityIndicator class="activity-indicator" [busy]="isLoading" [visibility]="isLoading ? 'visible' : 'collapse'" row="1" horizontalAlignment="center" verticalAlignment="center"></ActivityIndicator>

</GridLayout>